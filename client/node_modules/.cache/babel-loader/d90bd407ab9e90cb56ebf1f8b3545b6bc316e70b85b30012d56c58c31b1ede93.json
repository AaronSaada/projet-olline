{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nexport const loginUser = createAsyncThunk(\"user/loginUser\", async userCredentials => {\n  const request = await axios.post('http://localhost:4000/connexion', userCredentials);\n  const response = await request.data.data;\n  console.log(response);\n  localStorage.setItem(\"user\", JSON.stringify(response));\n  return response;\n});\nconst userSlice = createSlice({\n  name: \"user\",\n  initialState: {\n    loading: false,\n    user: null,\n    error: null\n  },\n  extraReducers: builder => {\n    builder.addCase(loginUser.pending, state => {\n      state.loading = true;\n      state.user = null;\n      state.error = null;\n    }).addCase(loginUser.fulfilled, (state, action) => {\n      state.loading = false;\n      state.user = action.payload;\n      state.error = null;\n    }).addCase(loginUser.rejected, (state, action) => {\n      state.loading = false;\n      state.user = null;\n      console.log(action.error.message);\n      if (action.error.message === \"Request failed with status code 401\") {\n        state.error = \"Accès refusé. Identifiants incorrects\";\n      } else {\n        state.error = action.error.message;\n      }\n      state.error = null;\n    });\n  }\n});\nexport default userSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","loginUser","userCredentials","request","post","response","data","console","log","localStorage","setItem","JSON","stringify","userSlice","name","initialState","loading","user","error","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","message","reducer"],"sources":["C:/Users/Aaron/Documents/GitHub/projet-olline/client/src/Store/UserSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\"\r\nimport axios from \"axios\"\r\n\r\n\r\nexport const loginUser = createAsyncThunk(\r\n  \"user/loginUser\",\r\n  async (userCredentials) => {\r\n    const request = await axios.post('http://localhost:4000/connexion', userCredentials);\r\n    const response = await request.data.data;\r\n    console.log(response)\r\n    localStorage.setItem(\"user\", JSON.stringify(response))\r\n    return response;\r\n  }\r\n)\r\n\r\nconst userSlice = createSlice({\r\n\r\n  name: \"user\",\r\n  initialState:{\r\n    loading: false,\r\n    user: null,\r\n    error: null\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(\r\n      loginUser.pending, \r\n      (state) => {\r\n        state.loading = true;\r\n        state.user = null;\r\n        state.error = null;\r\n      }\r\n    ).addCase(\r\n      loginUser.fulfilled,\r\n      (state, action) => {\r\n        state.loading = false;\r\n        state.user = action.payload;\r\n        state.error = null;\r\n      }\r\n    ).addCase(\r\n      loginUser.rejected,\r\n      (state, action) => {\r\n        state.loading = false;\r\n        state.user = null;\r\n        console.log(action.error.message);\r\n        if(action.error.message === \"Request failed with status code 401\"){\r\n          state.error = \"Accès refusé. Identifiants incorrects\"\r\n        } else{\r\n          state.error = action.error.message;\r\n        }\r\n        state.error = null;\r\n      }\r\n    )\r\n  }\r\n\r\n})\r\n\r\nexport default userSlice.reducer"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAQ,kBAAkB;AAChE,OAAOC,KAAK,MAAM,OAAO;AAGzB,OAAO,MAAMC,SAAS,GAAGH,gBAAgB,CACvC,gBAAgB,EAChB,MAAOI,eAAe,IAAK;EACzB,MAAMC,OAAO,GAAG,MAAMH,KAAK,CAACI,IAAI,CAAC,iCAAiC,EAAEF,eAAe,CAAC;EACpF,MAAMG,QAAQ,GAAG,MAAMF,OAAO,CAACG,IAAI,CAACA,IAAI;EACxCC,OAAO,CAACC,GAAG,CAACH,QAAQ,CAAC;EACrBI,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACP,QAAQ,CAAC,CAAC;EACtD,OAAOA,QAAQ;AACjB,CACF,CAAC;AAED,MAAMQ,SAAS,GAAGd,WAAW,CAAC;EAE5Be,IAAI,EAAE,MAAM;EACZC,YAAY,EAAC;IACXC,OAAO,EAAE,KAAK;IACdC,IAAI,EAAE,IAAI;IACVC,KAAK,EAAE;EACT,CAAC;EACDC,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CAACC,OAAO,CACbpB,SAAS,CAACqB,OAAO,EAChBC,KAAK,IAAK;MACTA,KAAK,CAACP,OAAO,GAAG,IAAI;MACpBO,KAAK,CAACN,IAAI,GAAG,IAAI;MACjBM,KAAK,CAACL,KAAK,GAAG,IAAI;IACpB,CACF,CAAC,CAACG,OAAO,CACPpB,SAAS,CAACuB,SAAS,EACnB,CAACD,KAAK,EAAEE,MAAM,KAAK;MACjBF,KAAK,CAACP,OAAO,GAAG,KAAK;MACrBO,KAAK,CAACN,IAAI,GAAGQ,MAAM,CAACC,OAAO;MAC3BH,KAAK,CAACL,KAAK,GAAG,IAAI;IACpB,CACF,CAAC,CAACG,OAAO,CACPpB,SAAS,CAAC0B,QAAQ,EAClB,CAACJ,KAAK,EAAEE,MAAM,KAAK;MACjBF,KAAK,CAACP,OAAO,GAAG,KAAK;MACrBO,KAAK,CAACN,IAAI,GAAG,IAAI;MACjBV,OAAO,CAACC,GAAG,CAACiB,MAAM,CAACP,KAAK,CAACU,OAAO,CAAC;MACjC,IAAGH,MAAM,CAACP,KAAK,CAACU,OAAO,KAAK,qCAAqC,EAAC;QAChEL,KAAK,CAACL,KAAK,GAAG,uCAAuC;MACvD,CAAC,MAAK;QACJK,KAAK,CAACL,KAAK,GAAGO,MAAM,CAACP,KAAK,CAACU,OAAO;MACpC;MACAL,KAAK,CAACL,KAAK,GAAG,IAAI;IACpB,CACF,CAAC;EACH;AAEF,CAAC,CAAC;AAEF,eAAeL,SAAS,CAACgB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}