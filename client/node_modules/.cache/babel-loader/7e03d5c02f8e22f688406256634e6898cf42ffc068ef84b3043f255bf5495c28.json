{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aaron\\\\Documents\\\\GitHub\\\\projet-olline\\\\client\\\\src\\\\Pages\\\\Panier\\\\Panier.jsx\";\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport async function AjouterLeProduitAuPanier(idProduit) {\n  // Cette partie fait les vérifications premières pour s'assurer que le localstorage est bien créer\n  // vérifie si les produits sont présents dans le localstorage, si non, sors de la fonction\n  if (!localStorage.getItem(\"ListeProduits\")) {\n    return;\n  } else {\n    // vérifie si le panier a été crée, si non, sors car le panier est crée avec la liste des produits\n    if (!localStorage.getItem(\"panier\")) {\n      return;\n    } else {\n      // Va venir chercher la liste des produits existants\n      var grabListeProduits = await JSON.parse(localStorage.getItem(\"ListeProduits\"));\n\n      // Va venir chercher le panier et son contenu\n      var panier = await JSON.parse(localStorage.getItem(\"panier\"));\n\n      // Va contenir les valeurs du produit\n      var produitQuiVaDansLePanier = [\"\"];\n\n      // Va chercher dans la liste des produits si l'id du produit existe dedans\n      for (let i = 0; grabListeProduits[i]; i++) {\n        if (parseInt(grabListeProduits[i].id_products) === idProduit) {\n          produitQuiVaDansLePanier = grabListeProduits[i];\n          produitQuiVaDansLePanier.quantity = 1;\n        }\n      }\n\n      // si le panier est vide, va ajouter directement le produit\n      if (panier.length === 0) {\n        panier.push(produitQuiVaDansLePanier);\n      } else {\n        // variable pour checker si le produit existe déjà dans le panier\n        var checkSiExisteDansLePanier = [];\n\n        // passe une fois dans la liste du panier pour vérifier que le produit est bien dedans\n        for (let i = 0; panier[i]; i++) {\n          if (panier[i].id_products === idProduit) {\n            checkSiExisteDansLePanier[0] = panier[i];\n            produitQuiVaDansLePanier.quantity = panier[i].quantity;\n          }\n        }\n\n        // Si le produit n'as pas été trouvé dans la liste\n        if (checkSiExisteDansLePanier === undefined) {\n          produitQuiVaDansLePanier.quantity += 1;\n          panier.push({\n            produitQuiVaDansLePanier\n          });\n        } else {\n          // change la quantité à +1 si le produit est dans le panier\n          var estDansLePanier = false;\n          for (let i = 0; panier[i]; i++) {\n            if (panier[i].id_products === idProduit) {\n              panier[i].quantity += 1;\n              estDansLePanier = true;\n            }\n          }\n          if (estDansLePanier === false) {\n            panier.push(produitQuiVaDansLePanier);\n          }\n        }\n      }\n    }\n    // Le local storage n'accepte pas d'objet, je transforme donc mon tableau en une string\n    localStorage.setItem(\"panier\", JSON.stringify(panier));\n  }\n}\n_c = AjouterLeProduitAuPanier;\nexport async function EnleverUneQuantiteDuPanier(idProduit) {\n  if (!localStorage.getItem(\"ListeProduits\")) {\n    return;\n  } else {\n    if (!localStorage.getItem(\"panier\")) {\n      return;\n    } else {\n      // Va venir chercher la liste des produits existants\n      var grabListeProduits = await JSON.parse(localStorage.getItem(\"ListeProduits\"));\n\n      // Va venir chercher le panier et son contenu\n      var panier = await JSON.parse(localStorage.getItem(\"panier\"));\n\n      // Va contenir les valeurs du produit\n      for (let i = 0; panier[i]; i++) {\n        if (panier[i].id_products === idProduit) {\n          if (panier[i].quantity > 1) {\n            panier[i].quantity -= 1;\n          } else {\n            panier.splice(i, 1);\n          }\n        }\n      }\n    }\n    localStorage.setItem(\"panier\", JSON.stringify(panier));\n  }\n}\n_c2 = EnleverUneQuantiteDuPanier;\nexport function AnnulerSaCommande() {\n  localStorage.setItem(\"panier\", \"[]\");\n}\n_c3 = AnnulerSaCommande;\nexport async function ValiderLePanier(idUser) {\n  try {\n    var grabListeProduit = await JSON.parse(localStorage.getItem(\"ListeProduits\"));\n    var panier = await JSON.parse(localStorage.getItem(\"panier\"));\n\n    // FAIS TA COMMANDE SI TU DOIS CREER UN PREMIER NUMERO DE COMMANDE\n    // SINON SUPPRIME LA LIGNE\n\n    for (let i = 0; panier[i]; i++) {\n      var PanierQuantiteRetirerDuStock = [];\n      for (let j = 0; grabListeProduit[j]; j++) {\n        if (panier[i].id_products === grabListeProduit[j]) {\n          PanierQuantiteRetirerDuStock = grabListeProduit;\n          PanierQuantiteRetirerDuStock.quantity = PanierQuantiteRetirerDuStock - panier[i].quantity;\n        }\n      }\n      // FAIRE TON AXIOS QUI ENVOIT LA VARIABLE PANIERQUANTITEDUSTOCK DANS TON BACK SANS RIEN CHANGER\n      // L'AXIOS DOIT JUSTE FAIRE UN PUT SUR LA QUANTITE EN LA CHANGEANT PAR CELLE QUI A ETE FOURNIE DANS LA VARIABLE\n      // LA QUANTITE A ETE RETIRER DIRECTEMENT\n    }\n    AnnulerSaCommande();\n  } catch (err) {\n    console.error(\"Erreur lors de l'envoi des données dans le back.\");\n  }\n}\n_c4 = ValiderLePanier;\nexport function Panier() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Panier\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 9\n  }, this);\n}\n_c5 = Panier;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"AjouterLeProduitAuPanier\");\n$RefreshReg$(_c2, \"EnleverUneQuantiteDuPanier\");\n$RefreshReg$(_c3, \"AnnulerSaCommande\");\n$RefreshReg$(_c4, \"ValiderLePanier\");\n$RefreshReg$(_c5, \"Panier\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","AjouterLeProduitAuPanier","idProduit","localStorage","getItem","grabListeProduits","JSON","parse","panier","produitQuiVaDansLePanier","i","parseInt","id_products","quantity","length","push","checkSiExisteDansLePanier","undefined","estDansLePanier","setItem","stringify","_c","EnleverUneQuantiteDuPanier","splice","_c2","AnnulerSaCommande","_c3","ValiderLePanier","idUser","grabListeProduit","PanierQuantiteRetirerDuStock","j","err","console","error","_c4","Panier","children","fileName","_jsxFileName","lineNumber","columnNumber","_c5","$RefreshReg$"],"sources":["C:/Users/Aaron/Documents/GitHub/projet-olline/client/src/Pages/Panier/Panier.jsx"],"sourcesContent":["import React, { useState } from 'react'\r\nimport axios from 'axios'\r\n\r\n\r\nexport async function AjouterLeProduitAuPanier(idProduit) {\r\n    \r\n    // Cette partie fait les vérifications premières pour s'assurer que le localstorage est bien créer\r\n    // vérifie si les produits sont présents dans le localstorage, si non, sors de la fonction\r\n    if (!localStorage.getItem(\"ListeProduits\")) {\r\n        return\r\n    } else {\r\n        // vérifie si le panier a été crée, si non, sors car le panier est crée avec la liste des produits\r\n        if (!localStorage.getItem(\"panier\")) {\r\n            return\r\n        } else {\r\n            // Va venir chercher la liste des produits existants\r\n            var grabListeProduits = await JSON.parse(localStorage.getItem(\"ListeProduits\"))\r\n\r\n            // Va venir chercher le panier et son contenu\r\n            var panier = await JSON.parse(localStorage.getItem(\"panier\"))\r\n\r\n\r\n            // Va contenir les valeurs du produit\r\n            var produitQuiVaDansLePanier = [\"\"]\r\n\r\n\r\n            // Va chercher dans la liste des produits si l'id du produit existe dedans\r\n            for (let i = 0; grabListeProduits[i]; i++) {\r\n                if (parseInt(grabListeProduits[i].id_products) === idProduit) {\r\n                    produitQuiVaDansLePanier = grabListeProduits[i]\r\n                    produitQuiVaDansLePanier.quantity = 1\r\n                }\r\n            }\r\n\r\n            // si le panier est vide, va ajouter directement le produit\r\n            if (panier.length === 0) {\r\n                panier.push(produitQuiVaDansLePanier)\r\n            } else {\r\n\r\n                // variable pour checker si le produit existe déjà dans le panier\r\n                var checkSiExisteDansLePanier = []\r\n\r\n                // passe une fois dans la liste du panier pour vérifier que le produit est bien dedans\r\n                for (let i = 0; panier[i]; i++) {\r\n                    if (panier[i].id_products === idProduit) {\r\n                        checkSiExisteDansLePanier[0] = panier[i]\r\n                        produitQuiVaDansLePanier.quantity = panier[i].quantity\r\n                    }\r\n                }\r\n\r\n                // Si le produit n'as pas été trouvé dans la liste\r\n                if (checkSiExisteDansLePanier === undefined) {\r\n                    produitQuiVaDansLePanier.quantity += 1\r\n                    panier.push({ produitQuiVaDansLePanier })\r\n                } else {\r\n\r\n                    // change la quantité à +1 si le produit est dans le panier\r\n                    var estDansLePanier = false\r\n                    for (let i = 0; panier[i]; i++) {\r\n                        if (panier[i].id_products === idProduit) {\r\n                            panier[i].quantity += 1\r\n                            estDansLePanier = true\r\n                        }\r\n                    }\r\n                    if (estDansLePanier === false) {\r\n                        panier.push(produitQuiVaDansLePanier)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // Le local storage n'accepte pas d'objet, je transforme donc mon tableau en une string\r\n        localStorage.setItem(\"panier\", JSON.stringify(panier))\r\n    }\r\n}\r\n\r\nexport async function EnleverUneQuantiteDuPanier(idProduit) {\r\n    if(!localStorage.getItem(\"ListeProduits\")){\r\n        return\r\n    } else {\r\n        if(!localStorage.getItem(\"panier\")){\r\n            return\r\n        } else{\r\n           // Va venir chercher la liste des produits existants\r\n           var grabListeProduits = await JSON.parse(localStorage.getItem(\"ListeProduits\"))\r\n\r\n           // Va venir chercher le panier et son contenu\r\n           var panier = await JSON.parse(localStorage.getItem(\"panier\"))\r\n\r\n\r\n           // Va contenir les valeurs du produit\r\n           for(let i = 0; panier[i]; i++){\r\n            if(panier[i].id_products === idProduit){\r\n                if(panier[i].quantity > 1){\r\n                    panier[i].quantity -=1\r\n                }else{\r\n                    panier.splice(i, 1);\r\n                }\r\n            }\r\n           }\r\n        }\r\n        localStorage.setItem(\"panier\", JSON.stringify(panier))\r\n    }\r\n}\r\n\r\nexport function AnnulerSaCommande(){\r\n    localStorage.setItem(\"panier\",\"[]\")\r\n}\r\n\r\nexport async function ValiderLePanier(idUser){\r\n    try{\r\n        var grabListeProduit = await JSON.parse(localStorage.getItem(\"ListeProduits\"))\r\n\r\n        var panier = await JSON.parse(localStorage.getItem(\"panier\"))\r\n\r\n        // FAIS TA COMMANDE SI TU DOIS CREER UN PREMIER NUMERO DE COMMANDE\r\n        // SINON SUPPRIME LA LIGNE\r\n\r\n        for(let i = 0; panier[i]; i++){\r\n            var PanierQuantiteRetirerDuStock = []\r\n            for(let j = 0; grabListeProduit[j]; j++){\r\n                if(panier[i].id_products === grabListeProduit[j]){\r\n                    PanierQuantiteRetirerDuStock = grabListeProduit\r\n                    PanierQuantiteRetirerDuStock.quantity = PanierQuantiteRetirerDuStock - panier[i].quantity\r\n                }\r\n            }\r\n            // FAIRE TON AXIOS QUI ENVOIT LA VARIABLE PANIERQUANTITEDUSTOCK DANS TON BACK SANS RIEN CHANGER\r\n            // L'AXIOS DOIT JUSTE FAIRE UN PUT SUR LA QUANTITE EN LA CHANGEANT PAR CELLE QUI A ETE FOURNIE DANS LA VARIABLE\r\n            // LA QUANTITE A ETE RETIRER DIRECTEMENT\r\n        }\r\n        AnnulerSaCommande()\r\n    }catch(err){\r\n        console.error(\"Erreur lors de l'envoi des données dans le back.\")\r\n    }\r\n}\r\n\r\nexport function Panier() {\r\n    return (\r\n        <div>Panier</div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}